CREATE OR REPLACE TRIGGER "ATLAS".BEF_CLASSE_INDICE BEFORE
   INSERT OR
   UPDATE ON ATLAS.CLASSE FOR EACH ROW DECLARE SEQ NUMBER;
  BEGIN
    IF NVL(:NEW.CODIGO,0) = 0 THEN
       SELECT NVL(MAX(CODIGO),0)+1 INTO SEQ FROM ATLAS.CLASSE;
      
      :NEW.CODIGO := SEQ;
    END IF;
  END;