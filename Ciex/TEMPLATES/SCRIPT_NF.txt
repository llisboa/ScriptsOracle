--DROP TABLE CXRJ.NF_CLIENTE;
--DROP TABLE CXRJ.NF_PRODUTO;
--DROP TABLE CXRJ.NF_TRANSPORTADOR;
--DROP TABLE CXRJ.NF_NOTA_FISCAL;
--DROP TABLE CXRJ.NF_NOTA_FISCAL_PROD;
--DROP TABLE CXRJ.NF_TRANSPORTADOR_REBOQUE;
--DROP TABLE CXRJ.NF_TRANSPORTADOR_VOLUME;

CREATE TABLE CXRJ.NF_CLIENTE (
	DOC VARCHAR2(15),
	TIPO_DOC VARCHAR2(4),
	CLIENTE VARCHAR2(60),
	IE VARCHAR2(15),
	ENDEREÇO VARCHAR2(60),
	NUMERO VARCHAR2(10),
	COMPLEMENTO VARCHAR2(60),
	BAIRRO VARCHAR2(30),
	CIDADE VARCHAR2(30),
	UF VARCHAR2(2),
	CEP VARCHAR2(10),
	PAIS VARCHAR2(30),
	TELEFONE VARCHAR2(15),
        SYS_MOMENTO_CRIA DATE,
        SYS_USUÁRIO_CRIA CHAR (20),
        SYS_LOCAL_CRIA CHAR (20),
        SYS_MOMENTO_ATUALIZA DATE,
        SYS_USUÁRIO_ATUALIZA CHAR (20),
        SYS_LOCAL_ATUALIZA CHAR(20),
        SYS_STATUS CHAR (1)
) TABLESPACE T_CXRJ_DAT;

ALTER TABLE CXRJ.NF_CLIENTE ADD CONSTRAINT ID_NF_CLIENTE
PRIMARY KEY (DOC);

CREATE TABLE CXRJ.NF_PRODUTO (
	COD VARCHAR2(20),
	DESCRIÇÃO VARCHAR2(120),
	UNID_COM VARCHAR2(6),
	UNID_TRIB VARCHAR2(6),
        SYS_MOMENTO_CRIA DATE,
        SYS_USUÁRIO_CRIA CHAR (20),
        SYS_LOCAL_CRIA CHAR (20),
        SYS_MOMENTO_ATUALIZA DATE,
        SYS_USUÁRIO_ATUALIZA CHAR (20),
        SYS_LOCAL_ATUALIZA CHAR(20),
        SYS_STATUS CHAR (1)
) TABLESPACE T_CXRJ_DAT;

ALTER TABLE CXRJ.NF_PRODUTO ADD CONSTRAINT ID_NF_PRODUTO
PRIMARY KEY (COD);

CREATE TABLE CXRJ.NF_TRANSPORTADOR (
	DOC VARCHAR2(15),
	TIPO_DOC VARCHAR2(4),
	TRANSPORTADOR VARCHAR2(60),
	IE VARCHAR2(15),
	ENDEREÇO VARCHAR2(60),
	CIDADE VARCHAR2(30),
	UF VARCHAR2(2),
        SYS_MOMENTO_CRIA DATE,
        SYS_USUÁRIO_CRIA CHAR (20),
        SYS_LOCAL_CRIA CHAR (20),
        SYS_MOMENTO_ATUALIZA DATE,
        SYS_USUÁRIO_ATUALIZA CHAR (20),
        SYS_LOCAL_ATUALIZA CHAR(20),
        SYS_STATUS CHAR (1)
) TABLESPACE T_CXRJ_DAT;

ALTER TABLE CXRJ.NF_TRANSPORTADOR ADD CONSTRAINT ID_NF_TRANSP
PRIMARY KEY (DOC);


CREATE TABLE CXRJ.NF_NOTA_FISCAL (
	SEQ NUMBER,
	PED_REF VARCHAR2 (13),
	NOME_FANTASIA VARCHAR2(60),
	NF_NUM VARCHAR2(15),
	CNPJ VARCHAR2(15),
	IE VARCHAR2(15),
	NF_MODELO NUMBER,
	NF_SERIE NUMBER,
	NF_DATA_EMISSAO DATE,
	NF_NATUREZA VARCHAR2(60),
	NF_DOCUMENTO VARCHAR2(15),
	NF_DANFE VARCHAR2(15),
	NF_DATA_SAIDA DATE,
	NF_PAGAMENTO VARCHAR2(30),
	NF_FORMA_EMISSAO VARCHAR2(15),
	NF_FINALIDADE_EMISSAO VARCHAR2(30),
	NF_UF VARCHAR2(2), 
	NF_MUNICIPIO VARCHAR2(30),
	DEST_TIPO VARCHAR2(4),
	DEST_CNPJ VARCHAR2(15),
	DEST_NOME VARCHAR2(60),
	DEST_IE VARCHAR2(15),
	DEST_LOGRADOURO VARCHAR2(60),
	DEST_NUM NUMBER,
	DEST_COMPLEMENTO VARCHAR2(15),
	DEST_BAIRRO VARCHAR2(30),
	DEST_CEP VARCHAR2(10),
	DEST_PAIS VARCHAR2(30),
	DEST_UF VARCHAR2(2), 
	DEST_MUNICIPIO VARCHAR2(30),
	DEST_TEL VARCHAR2(15),
	TRANSP_TIPO_FRETE VARCHAR2(30),
	TRANSP_TIPO_DOC VARCHAR2(4),
	TRANSP_CNPJ VARCHAR2(15),
	TRANSP_NOME VARCHAR2(60),
	TRANSP_IE VARCHAR2(15),
	TRANSP_LOGRADOURO VARCHAR2(60),
	TRANSP_UF VARCHAR2(2), 
	TRANSP_MUNICIPIO VARCHAR2(30),
	TRANSP_PLACA VARCHAR2(10),
	TRANSP_RNTC VARCHAR2(20), 
	TRANSP_PLACA_UF VARCHAR2(2), 
	EMITENTE_TIPO VARCHAR2(4),
	EMITENTE_CNPJ VARCHAR2(15),
	EMITENTE_NOME VARCHAR2(60),
	EMITENTE_IE VARCHAR2(15),
	EMITENTE_LOGRADOURO VARCHAR2(60), 
	EMITENTE_NUM VARCHAR2(10),
	EMITENTE_COMPLEMENTO VARCHAR2(50),
	EMITENTE_BAIRRO VARCHAR2(30),
	EMITENTE_CEP VARCHAR2(10),
	EMITENTE_PAIS VARCHAR2(30),
	EMITENTE_UF VARCHAR2(2), 
	EMITENTE_MUNICIPIO VARCHAR2(30),
	ICMS_BASE NUMBER,
	ICMS_TOTAL NUMBER,
	ICMS_ST NUMBER,
	ICMS_TOTAL_ST NUMBER,
	TOTAL_PROD NUMBER,
	TOTAL_FRETE NUMBER,
	TOTAL_SEGURO NUMBER,
	TOTAL_DESCONTO NUMBER,
	TOTAL_II NUMBER,
	TOTAL_IPI NUMBER,
	PIS NUMBER,
	COFINS NUMBER,
	DESPESAS NUMBER,
	TOTAL_NOTA NUMBER,
        SYS_MOMENTO_CRIA DATE,
        SYS_USUÁRIO_CRIA CHAR (20),
        SYS_LOCAL_CRIA CHAR (20),
        SYS_MOMENTO_ATUALIZA DATE,
        SYS_USUÁRIO_ATUALIZA CHAR (20),
        SYS_LOCAL_ATUALIZA CHAR(20),
        SYS_STATUS CHAR (1)
) TABLESPACE T_CXRJ_DAT;

ALTER TABLE CXRJ.NF_NOTA_FISCAL ADD CONSTRAINT ID_NF
PRIMARY KEY (SEQ);

CREATE TABLE CXRJ.NF_NOTA_FISCAL_PROD (
	NF NUMBER,
	ITEM NUMBER,
	COD VARCHAR2(60),  
	DESCRICAO VARCHAR2(120), 
	CFOP NUMBER,
	NCM VARCHAR2(10),
	COMERCIAL_UNID VARCHAR2(6),
	COMERCIAL_QTD NUMBER,
	COMERCIAL_VALOR NUMBER,
	TRIBUTO_UNID VARCHAR2(6),
	TRIBUTO_QTD NUMBER,
	TRIBUTO_VALOR NUMBER,
	VALOR_BRUTO NUMBER,
	ICMS_TRIBUTO VARCHAR2(200),
	ICMS_ORIGEM VARCHAR2(200),
	IPI_TRIBUTO VARCHAR2(200),
	PIS_TRIBUTO VARCHAR2(200),
	COFINS_TRIBUTO VARCHAR2(200),
	OBS VARCHAR2(500),
        SYS_MOMENTO_CRIA DATE,
        SYS_USUÁRIO_CRIA CHAR (20),
        SYS_LOCAL_CRIA CHAR (20),
        SYS_MOMENTO_ATUALIZA DATE,
        SYS_USUÁRIO_ATUALIZA CHAR (20),
        SYS_LOCAL_ATUALIZA CHAR(20),
        SYS_STATUS CHAR (1)
) TABLESPACE T_CXRJ_DAT;

ALTER TABLE CXRJ.NF_NOTA_FISCAL_PROD ADD CONSTRAINT ID_NF_NFPROD
PRIMARY KEY (NF,ITEM);

CREATE TABLE CXRJ.NF_TRANSPORTADOR_REBOQUE (
	NF NUMBER,
	PLACA VARCHAR2(8),  
	RNTC VARCHAR2(20), 
	UF VARCHAR2(2),
        SYS_MOMENTO_CRIA DATE,
        SYS_USUÁRIO_CRIA CHAR (20),
        SYS_LOCAL_CRIA CHAR (20),
        SYS_MOMENTO_ATUALIZA DATE,
        SYS_USUÁRIO_ATUALIZA CHAR (20),
        SYS_LOCAL_ATUALIZA CHAR(20),
        SYS_STATUS CHAR (1)
) TABLESPACE T_CXRJ_DAT;

ALTER TABLE CXRJ.NF_TRANSPORTADOR_REBOQUE ADD CONSTRAINT ID_REBOQUE
PRIMARY KEY (NF,PLACA);


CREATE TABLE CXRJ.NF_TRANSPORTADOR_VOLUME (
	NF NUMBER,
	ITEM NUMBER,  
	ESPECIE VARCHAR2(60),
	MARCA VARCHAR2(60), 
	NUMERO VARCHAR2(60),
	QTD NUMBER,
	LIQUIDO NUMBER,
	BRUTO NUMBER,    
        SYS_MOMENTO_CRIA DATE,
        SYS_USUÁRIO_CRIA CHAR (20),
        SYS_LOCAL_CRIA CHAR (20),
        SYS_MOMENTO_ATUALIZA DATE,
        SYS_USUÁRIO_ATUALIZA CHAR (20),
        SYS_LOCAL_ATUALIZA CHAR(20),
        SYS_STATUS CHAR (1)
) TABLESPACE T_CXRJ_DAT;

ALTER TABLE CXRJ.NF_TRANSPORTADOR_VOLUME ADD CONSTRAINT ID_VOLUME
PRIMARY KEY (NF,ITEM);


ALTER TABLE CXRJ.NF_NOTA_FISCAL_PROD ADD CONSTRAINT NF$NF_PROD$01
FOREIGN KEY (NF) REFERENCES CXRJ.NF_NOTA_FISCAL (SEQ) ON DELETE CASCADE;

ALTER TABLE CXRJ.NF_TRANSPORTADOR_REBOQUE ADD CONSTRAINT NF$NF_REBOQUE$01
FOREIGN KEY (NF) REFERENCES CXRJ.NF_NOTA_FISCAL (SEQ) ON DELETE CASCADE;

ALTER TABLE CXRJ.NF_TRANSPORTADOR_VOLUME ADD CONSTRAINT NF$NF_VOLUME$01
FOREIGN KEY (NF) REFERENCES CXRJ.NF_NOTA_FISCAL (SEQ) ON DELETE CASCADE;


